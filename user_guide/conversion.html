

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conversion &mdash; CoNLL-U Tools v1.3.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1f29e9d3"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Validation" href="validation.html" />
    <link rel="prev" title="User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            CoNLL-U Tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#quick-install">Quick Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#requirements">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#system-requirements">System Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#other-installation-methods">Other Installation Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#from-source">From Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#from-github-direct">From GitHub (Direct)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#specific-version">Specific Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#upgrade">Upgrade</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#import-error-no-module-named-conllu-tools">Import Error: No module named ‘conllu_tools’</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#version-conflicts">Version Conflicts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation.html#permission-errors">Permission Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#conversion">Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#conll-u-to-brat">CoNLL-U to brat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#brat-to-conll-u">brat to CoNLL-U</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#validation">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#evaluation">Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#pattern-matching">Pattern Matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#basic-pattern-search">Basic Pattern Search</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#pattern-syntax-examples">Pattern Syntax Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#utils">Utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#normalize-morphology">Normalize Morphology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#feature-conversion">Feature Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#xpos-conversion">XPOS Conversion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#need-help">Need Help?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conll-u-to-brat">CoNLL-U to Brat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-structure">Output Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-metadata-json-file">The <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#brat-to-conll-u">Brat to CoNLL-U</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-metadata-json-for-automatic-configuration">Using metadata.json for Automatic Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#missing-metadata-json">Missing metadata.json</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id-mismatches">ID Mismatches</a></li>
<li class="toctree-l4"><a class="reference internal" href="#token-mismatch-errors">Token Mismatch Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#missing-features">Missing Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#missing-output-file">Missing Output File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#encoding-issues">Encoding Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="validation.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation.html#quick-start">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation.html#validation-levels">Validation Levels</a><ul>
<li class="toctree-l4"><a class="reference internal" href="validation.html#level-1-basic-format">Level 1: Basic Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#level-2-standard-validation-default">Level 2: Standard Validation (Default)</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#level-3-extended-validation">Level 3: Extended Validation</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#level-4-language-specific-format">Level 4: Language-Specific Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#level-5-language-specific-content">Level 5: Language-Specific Content</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="validation.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="validation.html#custom-validator-configuration">Custom Validator Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#validating-string-content">Validating String Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#accessing-error-details">Accessing Error Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="validation.html#common-validation-errors">Common Validation Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="validation.html#id-sequence-errors">ID Sequence Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#multi-word-token-errors">Multi-word Token Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#upos-deprel-compatibility">UPOS-DEPREL Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="validation.html#tree-structure-errors">Tree Structure Errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="validation.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#quick-start">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="evaluation.html#disabling-dependency-evaluation">Disabling Dependency Evaluation</a></li>
<li class="toctree-l4"><a class="reference internal" href="evaluation.html#treebank-type-configuration">Treebank Type Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="evaluation.html#accessing-score-details">Accessing Score Details</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#common-issues">Common Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="evaluation.html#file-alignment">File Alignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="evaluation.html#token-count-mismatch">Token Count Mismatch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="evaluation.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="matching.html">Matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="matching.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#quick-start">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#basic-usage">Basic Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="matching.html#building-patterns">Building Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#searching-a-corpus">Searching a Corpus</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#working-with-match-results">Working with Match Results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#pattern-syntax">Pattern Syntax</a><ul>
<li class="toctree-l4"><a class="reference internal" href="matching.html#token-patterns">Token Patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#sentence-patterns">Sentence Patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#advanced-usage">Advanced Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="matching.html#manual-pattern-construction">Manual Pattern Construction</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#condition-types">Condition Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#nested-conditions">Nested Conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#pattern-explanation">Pattern Explanation</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#matching-individual-sentences">Matching Individual Sentences</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#common-issues">Common Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="matching.html#pattern-not-matching">Pattern Not Matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#empty-feature-handling">Empty Feature Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="matching.html#quantifier-behavior">Quantifier Behavior</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="matching.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="loading.html">Data Loading</a><ul>
<li class="toctree-l3"><a class="reference internal" href="loading.html#feature-set-loading">Feature Set Loading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="loading.html#basic-loading">Basic Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="loading.html#understanding-the-feature-set-format">Understanding the Feature Set Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="loading.html#custom-feature-sets">Custom Feature Sets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="loading.html#loading-other-language-data">Loading Other Language Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="loading.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="utils.html#morphology-normalization">Morphology Normalization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utils.html#quick-start">Quick Start</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#with-reference-features">With Reference Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#what-gets-normalized">What Gets Normalized</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#upos-utilities">UPOS Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utils.html#dalme-to-upos">DALME to UPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#upos-to-perseus">UPOS to Perseus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#feature-utilities">Feature Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utils.html#convert-features-to-xpos">Convert Features to XPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#convert-xpos-to-features">Convert XPOS to Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#validate-features">Validate Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#xpos-utilities">XPOS Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="utils.html#format-xpos">Format XPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#validate-xpos">Validate XPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="utils.html#low-level-conversion-tools">Low-level Conversion Tools</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Usage Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/io.html">I/O Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/io.html#round-trip-conversion">Round-trip Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/io.html#important-notes">Important Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/io.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/validation.html">Validation Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/validation.html#post-conversion-validation">Post-Conversion Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/validation.html#batch-validation">Batch Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/validation.html#integration-with-other-tools">Integration with Other Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/validation.html#validate-before-evaluation">Validate Before Evaluation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/validation.html#validate-after-conversion">Validate After Conversion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/validation.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/evaluation.html">Evaluation Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/evaluation.html#parser-development">Parser Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/evaluation.html#cross-validation">Cross-Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/evaluation.html#baseline-comparison">Baseline Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/evaluation.html#integration-examples">Integration Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/evaluation.html#evaluate-conversion-accuracy">Evaluate Conversion Accuracy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/evaluation.html#export-results-to-json-csv">Export Results to JSON/CSV</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/evaluation.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/matching.html">Matching Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/matching.html#linguistic-patterns">Linguistic Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/matching.html#syntactic-patterns">Syntactic Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/matching.html#morphological-patterns">Morphological Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/matching.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/normalization.html">Normalization Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/normalization.html#basic-normalization">Basic Normalization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#example-1-verb-with-gerund-features">Example 1: VERB with Gerund Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#example-2-aux-with-finite-verb-features">Example 2: AUX with Finite Verb Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#example-3-adj-with-degree-reconciliation">Example 3: ADJ with Degree Reconciliation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#example-4-noun-with-xpos-upos-mismatch-correction">Example 4: NOUN with XPOS/UPOS Mismatch Correction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/normalization.html#normalization-workflows">Normalization Workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#normalizing-a-conll-u-file">Normalizing a CoNLL-U File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#cleaning-imported-annotations">Cleaning Imported Annotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#validating-after-normalization">Validating After Normalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#batch-normalization">Batch Normalization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/normalization.html#error-handling">Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#handling-normalization-errors">Handling Normalization Errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/normalization.html#safe-normalization-with-fallbacks">Safe Normalization with Fallbacks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/normalization.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/utils.html">Utilities Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/utils.html#convert-features-to-xpos">Convert Features to XPOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/utils.html#complete-workflow">Complete Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/utils.html#filling-partial-xpos">Filling Partial XPOS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/utils.html#format-xpos">Format XPOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/utils.html#processing-mixed-formats">Processing Mixed Formats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/utils.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/io.html">IO Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/io.html#conversion-functions">Conversion Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/io.html#conllu-to-brat">conllu_to_brat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/io.html#brat-to-conllu">brat_to_conllu</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/io.html#data-loading-functions">Data Loading Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/io.html#load-language-data">load_language_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/io.html#load-whitespace-exceptions">load_whitespace_exceptions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/validation.html">Validation Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/validation.html#main-classes">Main Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/validation.html#conlluvalidator">ConlluValidator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/validation.html#errorreporter">ErrorReporter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/validation.html#errorentry">ErrorEntry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/validation.html#exceptions">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/validation.html#conllu_tools.validation.error_reporter.ValidationError"><code class="docutils literal notranslate"><span class="pre">ValidationError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/validation.html#validation-mixins">Validation Mixins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/evaluation.html">Evaluation Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/evaluation.html#main-classes">Main Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#evaluator">Evaluator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#score">Score</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/evaluation.html#supporting-classes">Supporting Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#udword">UDWord</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#udspan">UDSpan</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#alignment">Alignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#alignmentword">AlignmentWord</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/evaluation.html#exceptions">Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/evaluation.html#conllu_tools.evaluation.base.UDError"><code class="docutils literal notranslate"><span class="pre">UDError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/matching.html">Matching Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/matching.html#quick-example">Quick Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/matching.html#utility-functions">Utility Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#build-pattern">build_pattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#find-in-corpus">find_in_corpus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/matching.html#pattern-classes">Pattern Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#sentencepattern">SentencePattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#tokenpattern">TokenPattern</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#condition">Condition</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/matching.html#result-classes">Result Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/matching.html#matchresult">MatchResult</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/utils.html">Utils Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/utils.html#morphology-normalization">Morphology Normalization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.normalization.normalize_morphology"><code class="docutils literal notranslate"><span class="pre">normalize_morphology()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/utils.html#upos-utilities">UPOS Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.upos.upos_to_perseus"><code class="docutils literal notranslate"><span class="pre">upos_to_perseus()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.upos.dalme_to_upos"><code class="docutils literal notranslate"><span class="pre">dalme_to_upos()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/utils.html#feature-utilities">Feature Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.features.feature_string_to_dict"><code class="docutils literal notranslate"><span class="pre">feature_string_to_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.features.feature_dict_to_string"><code class="docutils literal notranslate"><span class="pre">feature_dict_to_string()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.features.features_to_xpos"><code class="docutils literal notranslate"><span class="pre">features_to_xpos()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.features.xpos_to_features"><code class="docutils literal notranslate"><span class="pre">xpos_to_features()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.features.validate_features"><code class="docutils literal notranslate"><span class="pre">validate_features()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/utils.html#xpos-utilities">XPOS Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#format-xpos">Format XPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#validate-xpos">Validate XPOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#ittb-to-perseus">ITTB to Perseus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#proiel-to-perseus">PROIEL to Perseus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#llct-to-perseus">LLCT to Perseus</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/utils.html#brat-utilities">brat Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.type_to_safe_type"><code class="docutils literal notranslate"><span class="pre">type_to_safe_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.safe_type_to_type"><code class="docutils literal notranslate"><span class="pre">safe_type_to_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.parse_annotation_line"><code class="docutils literal notranslate"><span class="pre">parse_annotation_line()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.format_annotation"><code class="docutils literal notranslate"><span class="pre">format_annotation()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.read_annotations"><code class="docutils literal notranslate"><span class="pre">read_annotations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.read_text_lines"><code class="docutils literal notranslate"><span class="pre">read_text_lines()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.sort_annotations_set"><code class="docutils literal notranslate"><span class="pre">sort_annotations_set()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.sort_annotations"><code class="docutils literal notranslate"><span class="pre">sort_annotations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.write_annotations"><code class="docutils literal notranslate"><span class="pre">write_annotations()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.write_text"><code class="docutils literal notranslate"><span class="pre">write_text()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.write_auxiliary_files"><code class="docutils literal notranslate"><span class="pre">write_auxiliary_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/utils.html#conllu_tools.utils.brat.get_next_id_number"><code class="docutils literal notranslate"><span class="pre">get_next_id_number()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_reference/constants.html">Constants Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#universal-dependencies-tags">Universal Dependencies Tags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#upos-tags">UPOS Tags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#universal-dependency-relations">Universal Dependency Relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#universal-features">Universal Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#relation-categories">Relation Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.CONTENT_DEPRELS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.CONTENT_DEPRELS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.FUNCTIONAL_DEPRELS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.FUNCTIONAL_DEPRELS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.LEFT_TO_RIGHT_RELATIONS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.LEFT_TO_RIGHT_RELATIONS</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#conll-u-token-structure">CoNLL-U Token Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.TOKEN_KEYS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.TOKEN_KEYS</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#xpos-mappings">XPOS Mappings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.UPOS_TO_PERSEUS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.UPOS_TO_PERSEUS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.FEATS_TO_XPOS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.FEATS_TO_XPOS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.XPOS_TO_FEATS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.XPOS_TO_FEATS</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.VALIDITY_BY_POS"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.VALIDITY_BY_POS</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#treebank-concordances">Treebank Concordances</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.ITTB_CONCORDANCES"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.ITTB_CONCORDANCES</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.PROIEL_CONCORDANCES"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.PROIEL_CONCORDANCES</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.LLCT_CONCORDANCES"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.LLCT_CONCORDANCES</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api_reference/constants.html#misc-column">MISC Column</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api_reference/constants.html#conllu_tools.constants.MISC_ATTRIBUTES"><code class="docutils literal notranslate"><span class="pre">conllu_tools.constants.MISC_ATTRIBUTES</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CoNLL-U Tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User Guide</a></li>
      <li class="breadcrumb-item active">Conversion</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/gpizzorno/conllu_tools/blob/main/docs/source/user_guide/conversion.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="conversion">
<h1>Conversion<a class="headerlink" href="#conversion" title="Link to this heading"></a></h1>
<p>This guide covers converting between brat standoff annotation format and CoNLL-U format.</p>
<p>Brat is a web-based annotation tool that uses standoff format (separate <code class="docutils literal notranslate"><span class="pre">.ann</span></code> and <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files).
CoNLL-U is a tabular format for representing linguistic annotations, especially dependency trees.</p>
<p>The conversion utilities allow you to:</p>
<ul class="simple">
<li><p>Convert CoNLL-U treebanks to Brat format for annotation/review</p></li>
<li><p>Convert Brat annotations back to CoNLL-U format</p></li>
<li><p>Handle enhanced dependencies and complex structures</p></li>
<li><p>Preserve morphological features and metadata</p></li>
</ul>
<section id="conll-u-to-brat">
<h2>CoNLL-U to Brat<a class="headerlink" href="#conll-u-to-brat" title="Link to this heading"></a></h2>
<p>Converting CoNLL-U files to Brat standoff format enables visual annotation and review using the Brat tool.</p>
<section id="basic-usage">
<h3>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conllu_tools.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">conllu_to_brat</span>

<span class="n">conllu_to_brat</span><span class="p">(</span>
    <span class="n">conllu_filename</span><span class="o">=</span><span class="s1">&#39;input.conllu&#39;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;brat_output/&#39;</span><span class="p">,</span>
    <span class="n">output_root</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">sents_per_doc</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This creates:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.txt</span></code> files containing the raw text</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.ann</span></code> files containing the annotations in Brat standoff format</p></li>
<li><p>Configuration files (<code class="docutils literal notranslate"><span class="pre">annotation.conf</span></code>, <code class="docutils literal notranslate"><span class="pre">visual.conf</span></code>, <code class="docutils literal notranslate"><span class="pre">tools.conf</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> file containing conversion parameters (used for round-trip conversion)</p></li>
</ul>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h3>
<dl class="simple myst">
<dt><strong>conllu_filename</strong> (str)</dt><dd><p>Path to the input CoNLL-U file.</p>
</dd>
<dt><strong>output_directory</strong> (str)</dt><dd><p>Directory where Brat files will be created.</p>
</dd>
<dt><strong>output_root</strong> (bool, optional)</dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, creates explicit ROOT nodes for sentence roots. This makes the dependency
structure more visible in Brat. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt><strong>sents_per_doc</strong> (int, optional)</dt><dd><p>Number of sentences per output document. If specified, long files are split into
multiple documents (e.g., <code class="docutils literal notranslate"><span class="pre">doc-001</span></code>, <code class="docutils literal notranslate"><span class="pre">doc-002</span></code>). If <code class="docutils literal notranslate"><span class="pre">None</span></code>, all sentences
go into one document. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
</section>
<section id="output-structure">
<h3>Output Structure<a class="headerlink" href="#output-structure" title="Link to this heading"></a></h3>
<p>The output directory will contain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>brat_output/
├── annotation.conf    # Defines annotation types
├── visual.conf        # Visual styling
├── tools.conf         # Tool configuration
├── metadata.json      # Conversion parameters (for round-trip conversion)
├── input-doc-001.txt  # Text for document 1
├── input-doc-001.ann  # Annotations for document 1
├── input-doc-002.txt
└── input-doc-002.ann
</pre></div>
</div>
</section>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Multiword tokens</strong>: Correctly handles multi-word tokens</p></li>
<li><p><strong>ROOT nodes</strong>: Optional explicit ROOT entity for dependency visualization</p></li>
<li><p><strong>Metadata preservation</strong>: Stores original CoNLL-U metadata</p></li>
<li><p><strong>Automatic splitting</strong>: Can split large files into manageable documents</p></li>
<li><p><strong>metadata.json</strong>: Automatically creates a metadata file containing conversion parameters</p></li>
</ul>
</section>
<section id="the-metadata-json-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> File<a class="headerlink" href="#the-metadata-json-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">conllu_to_brat</span></code> function automatically creates a <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> file in the output directory containing:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;conllu_filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;input.conllu&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sents_per_doc&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;output_root&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Purpose</strong>: This file stores the conversion parameters so that <code class="docutils literal notranslate"><span class="pre">brat_to_conllu</span></code> can automatically use the same settings for round-trip conversion. When you call <code class="docutils literal notranslate"><span class="pre">brat_to_conllu</span></code>, it will:</p>
<ol class="arabic simple">
<li><p>Check for <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> in the input directory</p></li>
<li><p>Load the parameters from the file if present</p></li>
<li><p>Use those values if you don’t explicitly provide them</p></li>
</ol>
<p><strong>Benefits</strong>:</p>
<ul class="simple">
<li><p>Ensures consistency between forward and reverse conversions</p></li>
<li><p>Eliminates the need to remember or document conversion parameters</p></li>
<li><p>Reduces errors from parameter mismatches</p></li>
</ul>
<p><strong>Note</strong>: You can override metadata values by explicitly passing parameters to <code class="docutils literal notranslate"><span class="pre">brat_to_conllu</span></code>.</p>
</section>
</section>
<section id="brat-to-conll-u">
<h2>Brat to CoNLL-U<a class="headerlink" href="#brat-to-conll-u" title="Link to this heading"></a></h2>
<p>Converting Brat annotations back to CoNLL-U format after manual annotation or review.</p>
<section id="id1">
<h3>Basic Usage<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conllu_tools.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">brat_to_conllu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conllu_tools.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_language_data</span>

<span class="c1"># Load feature set for validation</span>
<span class="n">feature_set</span> <span class="o">=</span> <span class="n">load_language_data</span><span class="p">(</span><span class="s1">&#39;feats&#39;</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;la&#39;</span><span class="p">)</span>

<span class="n">brat_to_conllu</span><span class="p">(</span>
    <span class="n">input_directory</span><span class="o">=</span><span class="s1">&#39;brat_output/&#39;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;conllu_output/&#39;</span><span class="p">,</span>
    <span class="n">ref_conllu</span><span class="o">=</span><span class="s1">&#39;original.conllu&#39;</span><span class="p">,</span>
    <span class="n">feature_set</span><span class="o">=</span><span class="n">feature_set</span><span class="p">,</span>
    <span class="n">output_root</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">sents_per_doc</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3>Parameters<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<dl class="simple myst">
<dt><strong>input_directory</strong> (str)</dt><dd><p>Directory containing Brat <code class="docutils literal notranslate"><span class="pre">.ann</span></code> and <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files.</p>
</dd>
<dt><strong>output_directory</strong> (str)</dt><dd><p>Directory where the output CoNLL-U file will be created. The output file will be named
<code class="docutils literal notranslate"><span class="pre">{basename}-from_brat.conllu</span></code> where <code class="docutils literal notranslate"><span class="pre">{basename}</span></code> is derived from the reference file name.</p>
</dd>
<dt><strong>ref_conllu</strong> (str)</dt><dd><p>Path to a reference CoNLL-U file. This provides morphological features (LEMMA, XPOS, FEATS)
and other information not captured in Brat annotations. Optional if <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> exists
in the input directory with this information.</p>
</dd>
<dt><strong>feature_set</strong> (dict)</dt><dd><p>Feature set definition loaded from <a class="reference internal" href="../api_reference/io.html#conllu_tools.io.load_language_data" title="conllu_tools.io.load_language_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">conllu_tools.io.load_language_data()</span></code></a>.
Used to validate and normalize features. Required parameter.</p>
</dd>
<dt><strong>output_root</strong> (bool, optional)</dt><dd><p>Must match the value used when creating the Brat files (whether ROOT entities were included).
While not used in the conversion logic itself, this parameter is required to ensure consistency
and must match the original conversion settings. Optional if <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> exists
in the input directory with this information.</p>
</dd>
<dt><strong>sents_per_doc</strong> (int, optional)</dt><dd><p>Must match the value used when creating the Brat files. Can be <code class="docutils literal notranslate"><span class="pre">None</span></code> if all sentences
were in one document. Optional if <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> exists in the input directory.</p>
</dd>
</dl>
</section>
<section id="id3">
<h3>Features<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Morphology from reference</strong>: Retrieves LEMMA, XPOS, FEATS from reference file</p></li>
<li><p><strong>Dependency from Brat</strong>: Uses HEAD and DEPREL from Brat annotations</p></li>
<li><p><strong>Enhanced dependencies</strong>: Supports enhanced dependency graphs</p></li>
<li><p><strong>ID renumbering</strong>: Handles ID conflicts when merging multiple files</p></li>
<li><p><strong>Automatic UPOS correction</strong>: Changes VERB→AUX for auxiliary verbs based on deprel</p></li>
<li><p><strong>Automatic parameter loading</strong>: Reads conversion parameters from <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> if present</p></li>
</ul>
</section>
<section id="using-metadata-json-for-automatic-configuration">
<h3>Using metadata.json for Automatic Configuration<a class="headerlink" href="#using-metadata-json-for-automatic-configuration" title="Link to this heading"></a></h3>
<p>If you converted to Brat using <code class="docutils literal notranslate"><span class="pre">conllu_to_brat</span></code>, a <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> file was created. You can use it to simplify the conversion back:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">conllu_tools.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">brat_to_conllu</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">conllu_tools.io</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_language_data</span>

<span class="c1"># Load feature set (still required)</span>
<span class="n">feature_set</span> <span class="o">=</span> <span class="n">load_language_data</span><span class="p">(</span><span class="s1">&#39;feats&#39;</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s1">&#39;la&#39;</span><span class="p">)</span>

<span class="c1"># metadata.json in input directory provides ref_conllu, sents_per_doc, and output_root</span>
<span class="n">brat_to_conllu</span><span class="p">(</span>
    <span class="n">input_directory</span><span class="o">=</span><span class="s1">&#39;brat_output/&#39;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;conllu_output/&#39;</span><span class="p">,</span>
    <span class="n">feature_set</span><span class="o">=</span><span class="n">feature_set</span>
<span class="p">)</span>
<span class="c1"># No need to specify ref_conllu, output_root, or sents_per_doc!</span>
</pre></div>
</div>
<p>The function will automatically:</p>
<ol class="arabic simple">
<li><p>Look for <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> in <code class="docutils literal notranslate"><span class="pre">brat_output/</span></code></p></li>
<li><p>Read <code class="docutils literal notranslate"><span class="pre">conllu_filename</span></code> (used as <code class="docutils literal notranslate"><span class="pre">ref_conllu</span></code>)</p></li>
<li><p>Read <code class="docutils literal notranslate"><span class="pre">output_root</span></code> and <code class="docutils literal notranslate"><span class="pre">sents_per_doc</span></code> values</p></li>
<li><p>Use those parameters for conversion</p></li>
</ol>
<p><strong>Manual parameters override metadata</strong>: If you provide parameters explicitly, they take precedence over metadata values.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="missing-metadata-json">
<h3>Missing metadata.json<a class="headerlink" href="#missing-metadata-json" title="Link to this heading"></a></h3>
<p>If you get <code class="docutils literal notranslate"><span class="pre">AssertionError:</span> <span class="pre">No</span> <span class="pre">ref_conllu</span> <span class="pre">value</span> <span class="pre">passed</span> <span class="pre">and</span> <span class="pre">no</span> <span class="pre">metadata</span> <span class="pre">file</span> <span class="pre">found</span></code>:</p>
<p><strong>Cause</strong>: The <code class="docutils literal notranslate"><span class="pre">brat_to_conllu</span></code> function needs to know the reference file and conversion parameters, but no <code class="docutils literal notranslate"><span class="pre">metadata.json</span></code> exists and you didn’t provide them explicitly.</p>
<p><strong>Solutions</strong>:</p>
<ol class="arabic">
<li><p>If you have the original parameters, provide them explicitly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">brat_to_conllu</span><span class="p">(</span>
    <span class="n">input_directory</span><span class="o">=</span><span class="s1">&#39;brat_output/&#39;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;conllu_output/&#39;</span><span class="p">,</span>
    <span class="n">feature_set</span><span class="o">=</span><span class="n">feature_set</span><span class="p">,</span>
    <span class="n">ref_conllu</span><span class="o">=</span><span class="s1">&#39;original.conllu&#39;</span><span class="p">,</span>
    <span class="n">output_root</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">sents_per_doc</span><span class="o">=</span><span class="mi">10</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>If you don’t know the parameters, check how the Brat files were created or try:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Start with defaults</span>
<span class="n">brat_to_conllu</span><span class="p">(</span>
    <span class="n">input_directory</span><span class="o">=</span><span class="s1">&#39;brat_output/&#39;</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="s1">&#39;conllu_output/&#39;</span><span class="p">,</span>
    <span class="n">feature_set</span><span class="o">=</span><span class="n">feature_set</span><span class="p">,</span>
    <span class="n">ref_conllu</span><span class="o">=</span><span class="s1">&#39;original.conllu&#39;</span><span class="p">,</span>
    <span class="n">output_root</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Try False first</span>
    <span class="n">sents_per_doc</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id-mismatches">
<h3>ID Mismatches<a class="headerlink" href="#id-mismatches" title="Link to this heading"></a></h3>
<p>If you get “ID mismatch” or “Sentence length mismatch” errors during brat_to_conllu:</p>
<ul class="simple">
<li><p>Ensure the reference file has the same sentences as the Brat files</p></li>
<li><p>Check that sentence order hasn’t changed</p></li>
<li><p>Verify <code class="docutils literal notranslate"><span class="pre">sents_per_doc</span></code> parameter matches original conversion (or use metadata.json)</p></li>
<li><p>Check that you haven’t added or removed sentences in Brat</p></li>
</ul>
</section>
<section id="token-mismatch-errors">
<h3>Token Mismatch Errors<a class="headerlink" href="#token-mismatch-errors" title="Link to this heading"></a></h3>
<p>If you get “Token mismatch in sentence X” errors:</p>
<p><strong>Cause</strong>: The tokens in the Brat <code class="docutils literal notranslate"><span class="pre">.txt</span></code> file don’t match the tokens in the reference CoNLL-U file.</p>
<p><strong>Solutions</strong>:</p>
<ul class="simple">
<li><p>Ensure you’re using the correct reference file (the one originally converted)</p></li>
<li><p>Check that no tokens were edited in the Brat <code class="docutils literal notranslate"><span class="pre">.txt</span></code> files</p></li>
<li><p>Verify that tokenization is identical between files (case-insensitive comparison is used)</p></li>
</ul>
</section>
<section id="missing-features">
<h3>Missing Features<a class="headerlink" href="#missing-features" title="Link to this heading"></a></h3>
<p>If converted CoNLL-U is missing morphological features:</p>
<ul class="simple">
<li><p>Ensure you provided a valid reference CoNLL-U file with features</p></li>
<li><p>Check that the reference file sentences align with Brat sentences</p></li>
<li><p>Verify the feature_set is loaded correctly with: <code class="docutils literal notranslate"><span class="pre">load_language_data('feats',</span> <span class="pre">language='la')</span></code></p></li>
<li><p>Remember: Brat only stores UPOS, HEAD, and DEPREL - all other fields come from the reference file</p></li>
</ul>
</section>
<section id="missing-output-file">
<h3>Missing Output File<a class="headerlink" href="#missing-output-file" title="Link to this heading"></a></h3>
<p>If no output file is created:</p>
<ul class="simple">
<li><p>Check that the input directory contains <code class="docutils literal notranslate"><span class="pre">.ann</span></code> files</p></li>
<li><p>Verify the output directory path is writable</p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">feature_set</span></code> parameter is provided (it’s required)</p></li>
<li><p>Check for error messages about missing reference files</p></li>
</ul>
</section>
<section id="encoding-issues">
<h3>Encoding Issues<a class="headerlink" href="#encoding-issues" title="Link to this heading"></a></h3>
<p>If you see garbled characters:</p>
<ul class="simple">
<li><p>Ensure all files use UTF-8 encoding</p></li>
<li><p>Check that your text editor/viewer supports UTF-8</p></li>
</ul>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../api_reference/io.html"><span class="doc">IO Module</span></a> - Detailed API documentation</p></li>
<li><p><a class="reference internal" href="../examples/io.html"><span class="doc">I/O Examples</span></a> - Conversion examples</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="validation.html" class="btn btn-neutral float-right" title="Validation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Gabe Pizzorno.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>